# Trouble Shooting



- AOP

API 호출했을 때 해당 클라이언트가 로그인을 했는지 안했는지에 대한 검증과 Request Dto에 대한 검증은 각 컨틀롤러의 API에서 반복적으로 이루어지고 있었고 API의 주기능이 아님에도 꽤나 많은 코드를 차지하고 있었다. 위에서 언급한 기능들은 반복적인 부가기능이기에 AOP 적용이 적절하다고 생각하여 annotation 기반으로 적용



- DB 설계

Guest가 필수적으로 필요한 시스템이기에 이를 USER 테이블과 어떻게 구분지을지에 대한 논의가 이루어졌고 세 가지 방안이 나옴

첫번째 방안은 아예 두 테이블을 따로 구현하려 했으나 공통으로 겹치는 컬럼도 많고 null값이 자주 사용될 token 컬럼의 경우 따로 테이블을 구성할 여지가 있어 이 때 외래키로 guest와 user를 모두 아우를 수 있는 공통 테이블이 필요하다고 판단하여 선택하지 x

두번째 방안은 account라는 한 테이블에 모든 컬럼을 집어넣고 guest의 경우 랜덤으로 생성된 email과 pw를 넣어주는 방식. 낭비되는 컬럼이 많고 데이터의 일관성이 떨어지며 user의 경우 통상적으로 따로 관리한다는 조언을 얻어 선택하지 x

세번째 방안은 account라는 테이블을 guest와 user가 상속받아 각자 구현하는 방식 insert 시 테이블을 2번 거친다는 단점이 있지만 공통 컬럼을 처리할 수 있고 각 테이블의 일관성이 보장된다는 점에서 채택



- Guest 유저 관리

- 알람 스케줄러

- REST API